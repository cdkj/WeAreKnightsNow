# Git Log å¯è§†åŒ–åç«¯æœåŠ¡

è¿™æ˜¯ä¸€ä¸ªåŸºäºFlaskçš„åç«¯æœåŠ¡ï¼Œç”¨äºè§£æGitä»“åº“çš„æäº¤å†å²å¹¶æä¾›APIæ¥å£ç»™å‰ç«¯è¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” è§£æGitä»“åº“çš„æäº¤å†å²
- ğŸ“Š æä¾›ç»“æ„åŒ–çš„æäº¤æ•°æ®
- ğŸ¨ ä¿ç•™Gitå›¾å½¢åŒ–åˆ†æ”¯ç»“æ„
- ğŸ“ˆ ç»Ÿè®¡æäº¤ä¿¡æ¯ï¼ˆä½œè€…ã€åˆ†æ”¯ç­‰ï¼‰
- ğŸ›¡ï¸ å®‰å…¨çš„è·¯å¾„éªŒè¯
- âš¡ é«˜æ€§èƒ½çš„æ•°æ®å¤„ç†

## é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ app.py              # ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ run.py              # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt    # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ utils/              # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ git_utils.py    # Gitæ“ä½œå·¥å…·
â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
```

## å®‰è£…ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

## è¿è¡ŒæœåŠ¡

### æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
python run.py
```

### æ–¹å¼2ï¼šç›´æ¥è¿è¡Œ

```bash
python app.py
```

### æ–¹å¼3ï¼šä½¿ç”¨Flaskå‘½ä»¤

```bash
set FLASK_APP=app.py
set FLASK_ENV=development
flask run --host=0.0.0.0 --port=5000
```

## APIæ¥å£

### 1. è·å–Gitæ—¥å¿—æ•°æ®

**POST** `/api/git-log`

è¯·æ±‚ä½“ï¼š
```json
{
    "repo_path": "/path/to/your/git/repository",
    "max_count": 100  // å¯é€‰ï¼Œæœ€å¤§æäº¤æ•°é‡ï¼Œä¸è®¾ç½®æˆ–è®¾ä¸º0åˆ™è·å–æ‰€æœ‰æäº¤
}
```

å“åº”ï¼š
```json
{
    "success": true,
    "data": {
        "repository": {
            "name": "é¡¹ç›®åç§°",
            "path": "ä»“åº“è·¯å¾„",
            "current_branch": "å½“å‰åˆ†æ”¯",
            "remote_url": "è¿œç¨‹ä»“åº“URL"
        },
        "commits": [
            {
                "line_number": 1,
                "graph": "* ",
                "hash": "abc1234",
                "refs": "origin/main, main",
                "message": "æäº¤ä¿¡æ¯",
                "time": "2 hours ago",
                "author": "ä½œè€…åç§°",
                "raw_line": "åŸå§‹è¡Œå†…å®¹"
            }
        ],
        "statistics": {
            "total_commits": 100,
            "total_lines": 120,
            "authors": [
                {"name": "ä½œè€…1", "count": 50},
                {"name": "ä½œè€…2", "count": 30}
            ],
            "branches": ["main", "develop"]
        }
    }
}
```

### 2. è·å–ä»“åº“ä¿¡æ¯

**POST** `/api/repository-info`

è¯·æ±‚ä½“ï¼š
```json
{
    "repo_path": "/path/to/your/git/repository"
}
```

### 3. å¥åº·æ£€æŸ¥

**GET** `/api/health`

## é…ç½®è¯´æ˜

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æœåŠ¡ï¼š

- `FLASK_ENV`: è¿è¡Œç¯å¢ƒï¼ˆdevelopment/productionï¼‰
- `FLASK_HOST`: æœåŠ¡ä¸»æœºåœ°å€ï¼ˆé»˜è®¤ï¼š0.0.0.0ï¼‰
- `FLASK_PORT`: æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ï¼š5000ï¼‰
- `FLASK_DEBUG`: è°ƒè¯•æ¨¡å¼ï¼ˆé»˜è®¤ï¼šTrueï¼‰
- `MAX_COMMITS`: æœ€å¤§æäº¤æ•°é‡é™åˆ¶ï¼ˆé»˜è®¤ï¼š1000ï¼‰
- `GIT_TIMEOUT`: Gitå‘½ä»¤è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ï¼š30ç§’ï¼‰

## é”™è¯¯å¤„ç†

æœåŠ¡ä¼šè¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

å¸¸è§é”™è¯¯ï¼š
- è·¯å¾„ä¸å­˜åœ¨
- ä¸æ˜¯æœ‰æ•ˆçš„Gitä»“åº“
- Gitå‘½ä»¤æ‰§è¡Œå¤±è´¥
- æƒé™ä¸è¶³

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `utils/git_utils.py` ä¸­æ·»åŠ Gitç›¸å…³å·¥å…·å‡½æ•°
2. åœ¨ `app.py` ä¸­æ·»åŠ æ–°çš„APIè·¯ç”±
3. æ›´æ–°é…ç½®æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰

### æµ‹è¯•

å¯ä»¥ä½¿ç”¨curlæˆ–Postmanæµ‹è¯•APIï¼š

```bash
curl -X POST http://localhost:5000/api/git-log \
  -H "Content-Type: application/json" \
  -d '{"repo_path": "/path/to/repo"}'
```

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…Gitå‘½ä»¤è¡Œå·¥å…·
2. æœåŠ¡éœ€è¦å¯¹Gitä»“åº“æœ‰è¯»å–æƒé™
3. å¤§å‹ä»“åº“å¯èƒ½éœ€è¦è¾ƒé•¿å¤„ç†æ—¶é—´
4. å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨WSGIæœåŠ¡å™¨ï¼ˆå¦‚Gunicornï¼‰

## è®¸å¯è¯

MIT License